create table pricer as select * from material_detail;

ALTER TABLE PRICER ADD (CURRENCY VARCHAR2(5));
ALTER TABLE PRICER ADD (NORM_SELL NUMBER(38,5));
ALTER TABLE PRICER ADD (START_DATE DATE);
ALTER TABLE PRICER ADD (VENDOR_QUOTE_NUMBER VARCHAR2(255));
ALTER TABLE PRICER ADD (SOLD_CUSTOMER_ID VARCHAR2(10));
ALTER TABLE PRICER ADD (END_CUSTOMER_ID VARCHAR2(10));
ALTER TABLE PRICER ADD (VENDOR_QUOTE_QUANTITY NUMBER(38));
ALTER TABLE PRICER ADD (END_CUSTOMER_NAME VARCHAR2(200 CHAR));
ALTER TABLE PRICER ADD (OVERRIDE_FLAG NUMBER(1));

ALTER TABLE PRICER ADD (PRICER_TYPE VARCHAR2(20));

insert into pricer 
(MATERIAL_ID,
COST,
CURRENCY,
NORM_SELL,
START_DATE,
PRICE_VALIDITY,
VENDOR_QUOTE_NUMBER,
SOLD_CUSTOMER_ID,
SHIPMENT_VALIDITY,
AVNET_QC_COMMENTS,
END_CUSTOMER_ID,
VENDOR_QUOTE_QUANTITY,
ID,
BIZ_UNIT,
COST_INDICATOR,
LAST_UPDATED_BY,
LAST_UPDATED_ON,
END_CUSTOMER_NAME,
OVERRIDE_FLAG,
DISPLAY_QUOTE_EFF_DATE,
MOQ,
MPQ,
QUOTATION_EFFECTIVE_DATE,
QUOTATION_EFFECTIVE_TO,
TERMS_AND_CONDITIONS)
select 
MATERIAL_ID,
COST,
CURRENCY,
NORM_SELL,
START_DATE,
VALIDITY,
VENDOR_QUOTE_NUMBER,
SOLD_CUSTOMER_ID,
SHIPMENT_VALIDITY,
AVENT_QUOTE_CENTRE_COMMNETS,
END_CUSTOMER_ID,
VENDOR_QUOTE_QUANTITY,
ID,
BIZ_UNIT_ID,
COST_INDICATOR_ID,
LAST_UPDATED_BY,
LAST_UPDATED_ON,
END_CUSTOMER_NAME,
OVERRIDE_FLAG,
DISPLAY_QUOTE_EFF_DATE,
MOQ,
MPQ,
QUOTATION_EFFECTIVE_DATE,
QUOTATION_EFFECTIVE_TO,
TERMS_AND_CONDITIONS 
from contract_price


UPDATE PRICER SET PRICER_TYPE = 'ContractPricer' WHERE SOLD_CUSTOMER_ID IS NOT NULL;
UPDATE PRICER SET PRICER_TYPE = 'NormalPricer' WHERE MATERIAL_CATEGORY = 'NORMAL';
UPDATE PRICER SET PRICER_TYPE = 'ProgramPricer' WHERE MATERIAL_CATEGORY = 'PROGRAM';

CREATE UNIQUE INDEX "WEBQUOTE"."PK_PRICER" ON "WEBQUOTE"."PRICER" ("ID") ;
CREATE INDEX "WEBQUOTE"."PRICER_INDEX2" ON "WEBQUOTE"."PRICER" ("MATERIAL_ID") ;
ALTER TABLE "WEBQUOTE"."PRICER" ADD CONSTRAINT "PK_PRICER" PRIMARY KEY ("ID");
ALTER TABLE "WEBQUOTE"."PRICER" MODIFY ("ID" NOT NULL ENABLE);
ALTER TABLE "WEBQUOTE"."PRICER" ADD CONSTRAINT "FK_PRICER_MATERIAL" FOREIGN KEY ("MATERIAL_ID") REFERENCES "WEBQUOTE"."MATERIAL" ("ID") ENABLE;
